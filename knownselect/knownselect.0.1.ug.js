var KnownSelect;KnownSelect=function(n,e){var i=this;i.OptionsToShow=void 0===e?5:e,i.InputValue=function(e){var t,n,l="";if("select"===e.nodeName.toLowerCase())if(void 0===e.selectedOptions)for(n=(t=e.children).length;n;)t[n-=1].selected&&(l=t[n].selected,n=0);else e.selectedOptions.length&&(l=e.selectedOptions[0].value);else l=e.value;return l},i.SelectJSON=function(e){var t,n,l,o,u;for(t=[],l=0,o=(n=e.querySelectorAll("option")).length;l<o;)n[l].disabled||n[l].value.length&&(u=[],n[l].getAttribute("data-synonyms")&&(u=n[l].getAttribute("data-synonyms").split(",")),t.push({Text:n[l].textContent,Value:n[l].value,Also:u})),l+=1;return t},i.Each=function(e,t){for(var n=e.length;n;)t(e[n-=1])},i.Search=function(e,t){var n,l,o,u;return n=[],i.Each(e,function(e){o=0,(u=new RegExp("^"+t+"$","gi")).test(e.Value)&&(o+=1e3),u.test(e.Text)&&(o+=500),i.Each(e.Also,function(e){u.test(e)&&(o+=50)}),(u=new RegExp("^"+t,"gi")).test(e.Text)&&(o+=250),i.Each(e.Also,function(e){u.test(e)&&(o+=25)}),(u=new RegExp("(^|\\s)"+t+"($|\\s)","gi")).test(e.Text)&&(o+=100),i.Each(e.Also,function(e){u.test(e)&&(o+=10)}),(u=new RegExp(".*"+t+".*","gi")).test(e.Text)&&(o+=60),i.Each(e.Also,function(e){u.test(e)&&(o+=1)}),o&&((l=e).Relevance=o,n.push(l))}),n.sort(function(e,t){return t.Relevance>e.Relevance?1:t.Relevance<e.Relevance?-1:e.Text>t.Text?1:e.Text<t.Text?-1:0})},i.SetupAutocomplete=function(e){var l=this;l.Select=e,l.Values=i.SelectJSON(l.Select),l.InitValue=i.InputValue(l.Select),l.TextInput=null,l.HiddenInput=null,l.AutoCompleteHolder=null,l.Cheerio=function(){l.AutoCompleteHolder.className="select-autocomplete hidden"},l.OptionChosen=function(e){var t,n;n=(t=e.target).getAttribute("data-value"),l.HiddenInput.value=n,l.TextInput.value=t.textContent,l.Cheerio()},l.AddAutoCompleteOption=function(e,t){var n;(n=document.createElement("button")).type="button",n.innerHTML=e,n.setAttribute("data-value",t),n.addEventListener("click",l.OptionChosen),n.addEventListener("tap",l.OptionChosen),l.AutoCompleteHolder.appendChild(n)},l.TextChanged=function(){if(i.InputValue(l.TextInput).length){var e,t,n;if((e=i.Search(l.Values,i.InputValue(l.TextInput))).length){for(;l.AutoCompleteHolder.childNodes.length;)l.AutoCompleteHolder.removeChild(l.AutoCompleteHolder.childNodes[0]);for(1===e.length&&(l.HiddenInput.value=e[0].Value),t=0,n=i.OptionsToShow,n=Math.min(n,e.length);t<n;)l.AddAutoCompleteOption(e[t].Text,e[t].Value),t+=1}l.AutoCompleteHolder.className="select-autocomplete"}else l.Cheerio()},l.ReplaceSelect=function(){l.HiddenInput=document.createElement("input"),l.HiddenInput.name=l.Select.name,l.HiddenInput.id=l.Select.id+"_Hidden",l.HiddenInput.value=l.InitValue,l.HiddenInput.type="hidden",l.TextInput=document.createElement("input"),l.TextInput.name=l.Select.name+"_Text",l.TextInput.id=l.Select.id,l.InitValue.length&&(l.TextInput.value=l.Select.querySelector('option[value="'+l.InitValue+'"]').textContent),l.TextInput.type="text",l.TextInput.addEventListener("keyup",l.TextChanged),l.AutoCompleteHolder=document.createElement("span"),l.AutoCompleteHolder.className="select-autocomplete hidden",l.Select.parentNode.replaceChild(l.TextInput,l.Select),l.TextInput.parentNode.insertBefore(l.HiddenInput,l.TextInput.nextSibling),l.HiddenInput.parentNode.insertBefore(l.AutoCompleteHolder,l.HiddenInput.nextSibling)},l.ReplaceSelect()},i.Init=function(){for(var e=document.querySelectorAll(n),t=e.length;t;)t-=1,i.SetupAutocomplete(e[t])},i.Init()};